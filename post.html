<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>창업 이야기</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body class="bg-white text-gray-800 font-sans">
  <div class="max-w-3xl mx-auto px-6 py-12">
    <div id="post-content" class="prose lg:prose-xl"></div>
  </div>

  <script>
    const params = new URLSearchParams(window.location.search);
    const file = params.get('file');
    fetch(`./posts/${file}.md`)
      .then(res => res.text())
      .then(text => {
        // frontmatter 추출
        const frontmatterMatch = text.match(/^---\n([\s\S]*?)\n---/);
        let html = '';
        if (frontmatterMatch) {
          const fmLines = frontmatterMatch[1].split('\n');
          const meta = {};
          fmLines.forEach(line => {
            const [key, ...rest] = line.split(':');
            meta[key.trim()] = rest.join(':').trim();
          });
          const body = text.replace(frontmatterMatch[0], '');
          html += `
            <div class="mb-8">
              <img src="${meta.thumbnail}" class="w-full h-64 object-cover rounded-xl shadow mb-4">
              <h1 class="text-3xl font-bold mb-2">${meta.title}</h1>
              <p class="text-gray-500 text-sm">${meta.date}</p>
              <p class="mt-4 text-lg text-gray-600">${meta.summary}</p>
            </div>
            <div>${marked.parse(body)}</div>
          `;
        } else {
          html = marked.parse(text);
        }
        document.getElementById('post-content').innerHTML = html;
      });
  </script>
</body>
</html>
